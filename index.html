<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Malla Curricular - Administraci칩n</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
  body {
    font-family: 'Poppins', sans-serif;
    background-color: #f0f8ff;
    margin: 0;
    padding: 20px;
    cursor: url('https://cdn-icons-png.flaticon.com/512/34/34627.png'), auto;
  }

  h1 {
    text-align: center;
    color: #003366;
    margin-bottom: 10px;
  }

  .selector-electivas {
    margin: 20px auto;
    padding: 15px;
    background-color: #e6f0ff;
    border: 1px solid #cce0ff;
    border-radius: 8px;
    max-width: 700px;
  }

  .malla-container {
    display: flex;
    gap: 20px;
    overflow-x: auto;
    padding-bottom: 20px;
  }

  .ciclo {
    min-width: 250px;
    background-color: #f0f8ff;
    border-radius: 12px;
    padding: 15px;
    border: 1px solid #b3d1ff;
    flex-shrink: 0;
  }

  .ciclo h2 {
    color: #003366;
    text-align: center;
    font-size: 18px;
    margin-bottom: 15px;
  }

  .curso {
    position: relative;
    padding: 10px;
    background-color: #e6e6e6;
    border-radius: 10px;
    border: 1px solid #ccc;
    cursor: default;
    transition: all 0.3s ease;
    text-align: center;
    margin-bottom: 10px;
    opacity: 0.6;
  }

  .curso.activo {
    background-color: #cce0ff;
    border-color: #003366;
    color: #003366;
    font-weight: bold;
    cursor: pointer;
    opacity: 1;
  }

  .curso.tildado {
    text-decoration: line-through;
    background-color: #d4d4d4;
    color: #777;
    opacity: 1;
    cursor: pointer;
  }

  .curso.electiva {
    border: 2px dashed #336699;
    background-color: #eaf4ff;
  }

  .tooltip {
    position: absolute;
    bottom: 110%;
    left: 50%;
    transform: translateX(-50%);
    background-color: #fff;
    border: 1px solid #ccc;
    border-radius: 6px;
    padding: 8px;
    font-size: 13px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    display: none;
    white-space: pre-line;
    z-index: 100;
  }

  .curso:hover .tooltip {
    display: block;
  }

  .curso.bloqueado::after {
    content: '游';
    position: absolute;
    right: 10px;
    top: 10px;
  }
</style>

  <div class="selector-electivas" id="electivas">
    <strong>Elige tus 2 치reas electivas:</strong><br>
    <label><input type="checkbox" class="opt" value="talento"> Talento Humano</label><br>
    <label><input type="checkbox" class="opt" value="finanzas"> Finanzas </label><br>
    <label><input type="checkbox" class="opt" value="proyectos "> Proyectos </label><br>
    <label><input type="checkbox" class="opt" value="marketing"> Marketing </label><br>
    <label><input type="checkbox" class="opt" value="log칤stica"> Log칤stica</label>
  </div>

  <div class="malla-container" id="contenedor-cursos"></div>

  <script>
    const cursos = [
  // 1er ciclo
  { nombre: "Lenguaje", creditos: 4, ciclo: 1 },
  { nombre: "M칠todos de estudio universitario", creditos: 3, ciclo: 1 },
  { nombre: "Historia del Per칰", creditos: 3, ciclo: 1 },
  { nombre: "Matem치tica I", creditos: 4, ciclo: 1 },
  { nombre: "Desarrollo personal", creditos: 3, ciclo: 1 },
  { nombre: "Ingl칠s I", creditos: 2, ciclo: 1 },

  // 2do ciclo
  { nombre: "Investigaci칩n Acad칠mica", creditos: 3, ciclo: 2 },
  { nombre: "Filosof칤a y 칄tica", creditos: 3, ciclo: 2 },
  { nombre: "Realidad Nacional y Mundial", creditos: 3, ciclo: 2 },
  { nombre: "Matem치tica II", creditos: 4, ciclo: 2, prereq: ["Matem치tica I"] },
  { nombre: "Derechos Fundamentales", creditos: 3, ciclo: 2 },
  { nombre: "Ingl칠s II", creditos: 2, ciclo: 2, prereq: ["Ingl칠s I"] },

  // 3er ciclo
  { nombre: "Estad칤stica Descriptiva", creditos: 4, ciclo: 3 },
  { nombre: "Microeconom칤a", creditos: 3, ciclo: 3 },
  { nombre: "Visi칩n para el Desarrollo", creditos: 3, ciclo: 3 }, prereq: ["Investigaci칩n Acad칠mica"] },
  { nombre: "Fundamentos de la Administraci칩n", creditos: 4, ciclo: 3 },
  { nombre: "TICs para la Gesti칩n", creditos: 3, ciclo: 3 },
  { nombre: "Fundamentos de la Contabilidad", creditos: 3, ciclo: 3 },
  { nombre: "Desarrollo Sostenible", creditos: 2, ciclo: 3 },

  // 4to ciclo
  { nombre: "Estad칤stica Inferencial", creditos: 4, ciclo: 4, prereq: ["Estad칤stica Descriptiva"] },
  { nombre: "Macroeconom칤a", creditos: 3, ciclo: 4, prereq: ["Microeconom칤a"] },
  { nombre: "Derecho Empresarial", creditos: 3, ciclo: 4 },
  { nombre: "Investigaci칩n cient칤fica", creditos: 3, ciclo: 4, prereq: ["Visi칩n para el Desarrollo"] },
  { nombre: "Procesos administrativos", creditos: 4, ciclo: 4, prereq: ["Fundamentos de la Administraci칩n"] },
  { nombre: "Costos y presupuestos", creditos: 3, ciclo: 4, prereq: ["Fundamentos de la Contabilidad"] },
  { nombre: "Matem치tica financiera", creditos: 4, ciclo: 4 },

  // 5to ciclo
  { nombre: "Derecho Laboral", creditos: 2, ciclo: 5, prereq: ["Derecho Empresarial"] },
  { nombre: "Administraci칩n de la Calidad", creditos: 3, ciclo: 5, prereq: ["Procesos Administrativos"] },
  { nombre: "Fundamentos del Talento Humano", creditos: 3, ciclo: 5},
  { nombre: "Finanzas Corporativas I", creditos: 3, ciclo: 5, prereq: ["Matem치tica financiera"] },
  { nombre: "Herramientas para el Desarrollo de Proyectos", creditos: 3, ciclo: 5 },
  { nombre: "Fundamentos de Marketing", creditos: 3, ciclo: 5 },
  { nombre: "Cadenas de Suministros", creditos: 3, ciclo: 5 },
  { nombre: "Emprendimiento e innovaci칩n", creditos: 3, ciclo: 5 },

  // 6to ciclo
  { nombre: "M칠todos Cuantitativos", creditos: 3, ciclo: 6, prereq: ["Estad칤stica Inferencial"] },
  { nombre: "Investigaci칩n de Mercados", creditos: 3, ciclo: 6 },
  { nombre: "Derecho Tributario", creditos: 2, ciclo: 6, prereq: ["Derecho Laboral"] },
  { nombre: "T칠cnicas de Investigaci칩n Cualitativa", creditos: 3, ciclo: 6, prereq: ["Investigaci칩n Cient칤fica"] },
  { nombre: "Reestructuraci칩n, Mejoramiento y Cambio Empresarial", creditos: 3, ciclo: 6, prereq: ["Administraci칩n de la Calidad"] },
  { nombre: "Reclutamiento y Selecci칩n del talento", creditos: 3, ciclo: 6, prereq: ["Fundamentos del Talento Humano"], area: "talento"  },
  { nombre: "Seguridad y salud en el trabajo", creditos: 3, ciclo: 6, area: "talento"  },
  { nombre: " Finanzas Corporativas II", creditos: 3, ciclo: 6, prereq: ["Finanzas Corporativas I"], area: "finanzas"  },
  { nombre: "Formulaci칩n y evaluaci칩n de proyectos de Inversi칩n", creditos: 3, ciclo: 6, prereq: ["Herramientas para el Desarrollo de Proyectos"], area: "proyectos"  },
  { nombre: "Marketing Digital", creditos: 3, ciclo: 6, prereq: ["Fundamentos de Marketing"], area: "marketing"  },
  { nombre: "Comportamiento del consumidor", creditos: 3, ciclo: 6, 치rea: "marketing"   },
  { nombre: "Planeaci칩n de la demanda, pron칩sticos y simuladores", creditos: 3, ciclo: 6, 치rea: "log칤stica"  },
  { nombre: "Investigaci칩n, desarrollo e innovaci칩n", creditos: 3, ciclo: 6, 치rea: "log칤stica"   },

  // 7mo ciclo
  { nombre: "Negocios Internacionales", creditos: 4, ciclo: 7 },
  { nombre: " T칠cnicas de Investigaci칩n Cuantitativa", creditos: 3, ciclo: 7, prereq: ["T칠cnicas de Investigaci칩n Cualitativa"] },
  { nombre: "Prospectiva Empresarial", creditos: 3, ciclo: 6, prereq: ["Reestructuraci칩n, Mejoramiento y Cambio Empresarial"] },
  { nombre: "Capacitaci칩n y Desarrollo del talento", creditos: 3, ciclo: 7, prereq: ["Reclutamiento y Selecci칩n del talento "], area: "talento"  },
  { nombre: "Gesti칩n del clima, cultura y comunicaci칩n organizacional", creditos: 3, ciclo: 7, 치rea: "talento"  },
  { nombre: "Mercado de Capitales", creditos: 3, ciclo: 7, prereq: ["Finanzas Corporativas II"], area: "finanzas"  },
  { nombre: "Derivados financieros", creditos: 3, ciclo: 7, 치rea: "finanzas"  },
  { nombre: "Formulaci칩n y evaluaci칩n de proyectos sociales I", creditos: 3, ciclo: 7, prereq: ["Formulaci칩n y evaluaci칩n de proyectos de Inversi칩n"], area: "proyectos"  },
  { nombre: "Gesti칩n de Riesgos de los Proyectos", creditos: 3, ciclo: 7, 치rea: "proyectos"  },
  { nombre: "Marketing de servicios", creditos: 3, ciclo: 7, prereq: ["Marketing Digital"], area: "marketing"  },
  { nombre: "Programaci칩n Neuroling칲칤stica", creditos: 3, ciclo: 7, 치rea: "marketing"  },
  { nombre: "Operaciones I", creditos: 3, ciclo: 7, area: "log칤stica"  },
  { nombre: "Aprovisionamiento y negociaci칩n", creditos: 3, ciclo: 7, 치rea: "log칤stica"  },

  // 8vo ciclo
  { nombre: "Integraci칩n Econ칩mica", creditos: 3, ciclo: 8, prereq: ["Negocios Internacionales"] },
  { nombre: "Proyecto de Investigaci칩n", creditos: 3, ciclo: 8, prereq: ["T칠cnicas de Investigaci칩n Cuantitativa"] },
  { nombre: "Planeamiento Estrat칠gico", creditos: 3, ciclo: 8, prereq: ["Prospectiva Empresarial"] },
  { nombre: "Gesti칩n P칰blica", creditos: 3, ciclo: 8 },
  { nombre: "Evaluaci칩n del desempe침o laboral", creditos: 3, ciclo: 8, prereq: ["Capacitaci칩n y Desarrollo del talento "], area: "talento"  },
  { nombre: "Inteligencia Emocional y Social", creditos: 3, ciclo: 8, 치rea: "talento"  },
  { nombre: "Finanzas Internacionales", creditos: 3, ciclo: 8, prereq: ["Mercado de Capitales"], area: "finanzas"  },
  { nombre: "Econometr칤a Financiera", creditos: 3, ciclo: 8, 치rea: "finanzas"  },
  { nombre: " Formulaci칩n y evaluaci칩n de proyectos sociales II", creditos: 3, ciclo: 8, prereq: ["Formulaci칩n y evaluaci칩n de proyectos sociales I"], area: "proyectos"  },
  { nombre: "Gesti칩n de proyectos p칰blicos y privados", creditos: 3, ciclo: 8, 치rea: "proyectos"  },
  { nombre: "Marketing internacional", creditos: 3, ciclo: 8, prereq: ["Marketing de servicios"], area: "marketing"  },
  { nombre: "Publicidad y Branding", creditos: 3, ciclo: 8, 치rea: "marketing"  },
  { nombre: " Operaciones II", creditos: 3, ciclo: 8, 치rea: "log칤stica"  },
  { nombre: "Gesti칩n de almacenes e inventarios", creditos: 3, ciclo: 8, 치rea: "log칤stica"  },

  // 9no ciclo
  { nombre: "Cadena de Valor", creditos: 3, ciclo: 9 },
  { nombre: "Desarrollo de Investigaci칩n I", creditos: 3, ciclo: 9, prereq: ["Proyecto de Investigaci칩n"] },
  { nombre: "Direcci칩n Estrat칠gica", creditos: 3, ciclo: 9, prereq: ["Planeamiento Estrat칠gico"] },
  { nombre: "Desarrollo y Lanzamiento de Nuevos Productos", creditos: 3, ciclo: 9 },
  { nombre: "Valoraci칩n de puestos y gesti칩n de las compensaciones", creditos: 3, ciclo: 9, prereq: ["Evaluaci칩n del desempe침o laboral"], area: "talento"  },
  { nombre: "Gesti칩n del Talento Humano en el sector p칰blico", creditos: 3, ciclo: 9, 치rea: "talento"  },
  { nombre: "Gesti칩n de Riesgos Financieros", creditos: 3, ciclo: 9, prereq: ["Finanzas Internacionales"], area: "finanzas"  },
  { nombre: "Finanzas P칰blicas", creditos: 3, ciclo: 9, 치rea: "finanzas"  },
  { nombre: "Gerencia de Proyectos", creditos: 3, ciclo: 9, prereq: ["Formulaci칩n y evaluaci칩n de proyectos sociales II"], area: "proyectos"  },
  { nombre: "Gerencia de Ventas", creditos: 3, ciclo: 9, 치rea: "marketing"  },
  { nombre: "Negociaci칩n Comercial", creditos: 3, ciclo: 9, 치rea: "marketing"  },
  { nombre: "Log칤stica en el sector p칰blico", creditos: 3, ciclo: 9, 치rea: "log칤stica"  },
  { nombre: "Distribuci칩n y transporte", creditos: 3, ciclo: 9, 치rea: "log칤stica"  },

  // 10mo ciclo
  { nombre: " Desarrollo de Investigaci칩n II", creditos: 3, ciclo: 10 },
  { nombre: "Gerencia General y Alta Direcci칩n", creditos: 3, ciclo: 10, prereq: ["Direcci칩n Estrat칠gica"] },
  { nombre: "Gesti칩n de Pymes", creditos: 3, ciclo: 10 },
  { nombre: "Gerencia Estrat칠gica del Talento Humano", creditos: 3, ciclo: 10, prereq: ["Valoraci칩n de puestos y gesti칩n de las compensaciones"], area: "talento"  },
  { nombre: "Auditor칤a en la Gesti칩n del Talento Humano", creditos: 3, ciclo: 10, 치rea: "talento"  },
  { nombre: "Direcci칩n financiera", creditos: 3, ciclo: 10, prereq: ["Gesti칩n de Riesgos Financieros"], area: "finanzas"  },
  { nombre: "Taller de Proyectos", creditos: 3, ciclo: 10, prereq: ["Gerencia de Proyectos"], area: "proyectos"  },
  { nombre: "Gerencia de Marketing", creditos: 3, ciclo: 10, 치rea: "marketing"  },
  { nombre: "Neuromarketing", creditos: 3, ciclo: 10, 치rea: "marketing"  },
  { nombre: "Gerencia Log칤stica", creditos: 3, ciclo: 10, 치rea: "log칤stica"  },
  { nombre: "Log칤stica Internacional", creditos: 3, ciclo: 10, 치rea: "log칤stica"  },
]; // ya definidos arriba
    const contenedor = document.getElementById("contenedor-cursos");

    function guardarElectivas() {
      const seleccionadas = Array.from(document.querySelectorAll('.opt:checked')).map(e => e.value);
      localStorage.setItem('electivasSeleccionadas', JSON.stringify(seleccionadas));
    }

    function cargarElectivas() {
      const guardadas = JSON.parse(localStorage.getItem('electivasSeleccionadas') || '[]');
      document.querySelectorAll('.opt').forEach(opt => {
        opt.checked = guardadas.includes(opt.value);
      });
    }

    function renderCursos() {
      contenedor.innerHTML = "";
      const electivas = Array.from(document.querySelectorAll('.opt:checked')).map(e => e.value);
      const agrupados = cursos.reduce((acc, curso) => {
        if (curso.area && !electivas.includes(curso.area)) return acc;
        if (!acc[curso.ciclo]) acc[curso.ciclo] = [];
        acc[curso.ciclo].push(curso);
        return acc;
      }, {});

      Object.keys(agrupados).sort((a, b) => a - b).forEach(ciclo => {
        const divCiclo = document.createElement("div");
        divCiclo.className = "ciclo";
        const titulo = document.createElement("h2");
        titulo.textContent = `${ciclo}춿 Ciclo`;
        divCiclo.appendChild(titulo);

        agrupados[ciclo].forEach(curso => {
          const estado = localStorage.getItem(curso.nombre) === "true";
          const prereqCumplidos = !curso.prereq || curso.prereq.every(p => localStorage.getItem(p) === "true");

          const div = document.createElement("div");
          div.className = "curso";
          if (estado) div.classList.add("tildado");
          else if (prereqCumplidos) div.classList.add("activo");
          else div.classList.add("bloqueado");
          if (curso.area) div.classList.add("electiva");

          div.textContent = curso.nombre;

          const tooltip = document.createElement("div");
          tooltip.className = "tooltip";
          tooltip.textContent = `Cr칠ditos: ${curso.creditos}\nPrerrequisitos: ${curso.prereq ? curso.prereq.join(', ') : 'NR'}`;
          div.appendChild(tooltip);

          if (div.classList.contains("activo") || div.classList.contains("tildado")) {
            div.addEventListener("click", () => {
              const nuevo = !(localStorage.getItem(curso.nombre) === "true");
              localStorage.setItem(curso.nombre, nuevo);
              renderCursos();
            });
          }

          divCiclo.appendChild(div);
        });

        contenedor.appendChild(divCiclo);
      });
    }

    document.querySelectorAll('.opt').forEach(opt => {
      opt.addEventListener('change', () => {
        const seleccionadas = Array.from(document.querySelectorAll('.opt:checked'));
        if (seleccionadas.length > 2) {
          opt.checked = false;
          alert('Solo puedes elegir 2 치reas electivas.');
        }
        guardarElectivas();
        renderCursos();
      });
    });

    cargarElectivas();
    renderCursos();
  </script>
</body>
</html>
